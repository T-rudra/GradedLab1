# Graded Lab 1
<div class="no-overflow"><p dir="ltr" style="text-align: left;"></p><h1 data-start="97" data-end="146">Pythonic Arithmetic Parser in C</h1><h2 data-start="148" data-end="155">Goal</h2><p data-start="156" data-end="325">Write a&nbsp;<strong data-start="164" data-end="177">C program</strong>&nbsp;that evaluates arithmetic expressions from text files using (mostly) Python’s operator rules and standard C (similar to Java) arithmetic semantics. The program must:</p><ul data-start="326" data-end="547"><li data-start="326" data-end="373"><p data-start="328" data-end="373">Read an input file (or a directory of files).</p></li><li data-start="374" data-end="407"><p data-start="376" data-end="407">Parse and evaluate expressions.</p></li><li data-start="408" data-end="471"><p data-start="410" data-end="471">Report either the numeric result or a precise error location.</p></li><li data-start="472" data-end="547"><p data-start="474" data-end="547">Write the result to an&nbsp;<strong data-start="497" data-end="512">output file</strong>&nbsp;with a specific naming convention.</p></li></ul><h2 data-start="549" data-end="561">CLI &amp; I/O</h2><h3 data-start="563" data-end="577">Invocation</h3><pre data-start="578" data-end="657"><div><div><div><div></div></div></div><div dir="ltr"><code>calc [-d DIR | --dir DIR] [-o OUTDIR | --output-dir OUTDIR] input.txt
</code></div></div></pre><ul data-start="658" data-end="972"><li data-start="658" data-end="745"><p data-start="660" data-end="745">If&nbsp;<code data-start="663" data-end="673">-d/--dir</code>&nbsp;is provided,&nbsp;<strong data-start="687" data-end="724">process all&nbsp;<code data-start="701" data-end="708">*.txt</code>&nbsp;files in DIR`</strong>&nbsp;(ignore subfolders).</p></li><li data-start="746" data-end="898"><p data-start="748" data-end="816">If&nbsp;<code data-start="751" data-end="768">-o/--output-dir</code>&nbsp;is&nbsp;<strong data-start="772" data-end="783">omitted</strong>, create a default output folder:</p><pre data-start="819" data-end="866"><div><div><div><div></div></div></div><div dir="ltr"><code>&lt;input_base&gt;_&lt;username&gt;_&lt;studentid&gt;
</code></div></div></pre><p data-start="869" data-end="898">Example:&nbsp;<code data-start="878" data-end="898">labs_valdis_12345/</code></p></li><li data-start="899" data-end="972"><p data-start="901" data-end="972">If&nbsp;<code data-start="904" data-end="921">-o/--output-dir</code>&nbsp;<strong data-start="922" data-end="937">is provided</strong>&nbsp;and does not exist,&nbsp;<strong data-start="958" data-end="971">create it</strong>.</p></li></ul><h3 data-start="974" data-end="994">Output file name</h3><p data-start="995" data-end="1031">For each input&nbsp;<code data-start="1010" data-end="1021">task1.txt</code>, produce:</p><pre data-start="1032" data-end="1079"><div><div><div><div></div></div></div><div dir="ltr"><code>task1_&lt;name&gt;_&lt;lastname&gt;_&lt;studentid&gt;.txt
</code></div></div></pre><p data-start="1080" data-end="1155">The file contains&nbsp;<strong data-start="1098" data-end="1108">either</strong>&nbsp;the result (single line)&nbsp;<strong data-start="1134" data-end="1140">or</strong>&nbsp;<code data-start="1141" data-end="1154">ERROR:&lt;pos&gt;</code>.</p><blockquote data-start="1157" data-end="1263"><p data-start="1159" data-end="1263"><strong data-start="1159" data-end="1181">Character position</strong>&nbsp;is&nbsp;<strong data-start="1185" data-end="1196">1-based</strong>, counting every char in the file, including&nbsp;<code data-start="1241" data-end="1245">\n</code>&nbsp;as one character.</p></blockquote><h2 data-start="1265" data-end="1296">Input Assumptions (Baseline)</h2><ul data-start="1297" data-end="1526"><li data-start="1297" data-end="1314"><p data-start="1299" data-end="1314"><strong data-start="1299" data-end="1308">ASCII</strong>&nbsp;only.</p></li><li data-start="1315" data-end="1348"><p data-start="1317" data-end="1348">Whitespace may appear anywhere.</p></li><li data-start="1349" data-end="1440"><p data-start="1351" data-end="1440">At minimum (grade 4–6) inputs are&nbsp;<strong data-start="1385" data-end="1412">single line ≤ 100 chars</strong>&nbsp;(later grades extend this).</p></li><li data-start="1441" data-end="1526"><p data-start="1443" data-end="1526">Expressions can be&nbsp;<strong data-start="1462" data-end="1473">integer</strong>&nbsp;and, for higher grades,&nbsp;<strong data-start="1498" data-end="1507">float</strong>&nbsp;(IEEE 754 double).</p></li></ul><h2 data-start="1528" data-end="1557">Features by Grade (Rubric)</h2><h3 data-start="1559" data-end="1588">Grade 4/10 — Minimal Pass</h3><ul data-start="1589" data-end="1816"><li data-start="1589" data-end="1617"><p data-start="1591" data-end="1617">Single line (≤ 100 chars).</p></li><li data-start="1618" data-end="1674"><p data-start="1620" data-end="1674"><strong data-start="1620" data-end="1632">Integers</strong>&nbsp;only (base-10, optional leading&nbsp;<code data-start="1665" data-end="1668">+</code>/<code data-start="1669" data-end="1672">-</code>).</p></li><li data-start="1675" data-end="1709"><p data-start="1677" data-end="1709"><strong data-start="1677" data-end="1690">Operators</strong>:&nbsp;<code data-start="1692" data-end="1695">+</code>&nbsp;<code data-start="1696" data-end="1699">-</code>&nbsp;(binary).</p></li><li data-start="1710" data-end="1753"><p data-start="1712" data-end="1753">Output: numeric result (as integer text).</p></li><li data-start="1754" data-end="1816"><p data-start="1756" data-end="1816">On any parse/eval error:&nbsp;<code data-start="1781" data-end="1794">ERROR:&lt;pos&gt;</code>&nbsp;(1-based char index).</p></li></ul><h3 data-start="1818" data-end="1852">Grade 5/10 — Positioned Errors</h3><ul data-start="1853" data-end="2087"><li data-start="1853" data-end="1880"><p data-start="1855" data-end="1880">Same as Grade 4&nbsp;<strong data-start="1871" data-end="1879">plus</strong>:</p></li><li data-start="1881" data-end="2087"><p data-start="1883" data-end="1969"><strong data-start="1883" data-end="1910">Accurate error position</strong>: if the first error is at character 57, output&nbsp;<code data-start="1958" data-end="1968">ERROR:57</code>.</p><ul data-start="1972" data-end="2087"><li data-start="1972" data-end="2087"><p data-start="1974" data-end="2087">Examples of errors: invalid token, unexpected end, two operators in a row, leading operator without operand, etc.</p></li></ul></li></ul><h3 data-start="2089" data-end="2140">Grade 6/10 — Multiplication (+ optional floats)</h3><ul data-start="2141" data-end="2376"><li data-start="2141" data-end="2160"><p data-start="2143" data-end="2160">Add&nbsp;<code data-start="2147" data-end="2150">*</code>&nbsp;(binary).</p></li><li data-start="2161" data-end="2343"><p data-start="2163" data-end="2259"><strong data-start="2163" data-end="2187">Additional challenge:</strong>&nbsp;support&nbsp;<strong data-start="2223" data-end="2242">floats (64-bit)</strong>&nbsp;mixed with ints.</p><ul data-start="2262" data-end="2343"><li data-start="2262" data-end="2343"><p data-start="2264" data-end="2343">If floats are supported, print using&nbsp;<code data-start="2301" data-end="2308">%.15g</code>&nbsp;(see&nbsp;<strong data-start="2314" data-end="2335">Output formatting</strong>&nbsp;below).</p></li></ul></li><li data-start="2344" data-end="2376"><p data-start="2346" data-end="2376">Still single line ≤ 100 chars.</p></li></ul><h3 data-start="2378" data-end="2427">Grade 7/10 — Division (+ big files challenge)</h3><ul data-start="2428" data-end="2767"><li data-start="2428" data-end="2502"><p data-start="2430" data-end="2502">Add&nbsp;<code data-start="2434" data-end="2437">/</code>&nbsp;(true division if floats supported; otherwise integer division).</p></li><li data-start="2503" data-end="2672"><p data-start="2505" data-end="2672"><strong data-start="2505" data-end="2525">Division by zero</strong>&nbsp;⇒&nbsp;<code data-start="2528" data-end="2541">ERROR:&lt;pos&gt;</code>&nbsp;where&nbsp;<code data-start="2548" data-end="2555">&lt;pos&gt;</code>&nbsp;is the&nbsp;<strong data-start="2563" data-end="2617">starting char index of the offending divisor token</strong>&nbsp;(or the&nbsp;<code data-start="2626" data-end="2629">/</code>&nbsp;token—either is acceptable if documented).</p></li><li data-start="2673" data-end="2767"><p data-start="2675" data-end="2767"><strong data-start="2675" data-end="2699">Additional challenge</strong>: allow multiple lines and inputs up to&nbsp;<strong data-start="2739" data-end="2760">10,000 characters</strong>&nbsp;total.</p></li></ul><h3 data-start="2769" data-end="2797">Grade 8/10 — Parentheses</h3><ul data-start="2798" data-end="2997"><li data-start="2798" data-end="2854"><p data-start="2800" data-end="2854">Add&nbsp;<code data-start="2804" data-end="2807">(</code>&nbsp;<code data-start="2808" data-end="2811">)</code>&nbsp;with correct precedence and associativity.</p></li><li data-start="2855" data-end="2997"><p data-start="2857" data-end="2997"><strong data-start="2857" data-end="2876">Error reporting</strong>&nbsp;must still work (unmatched paren should point to the problematic paren or place where the closing/opening was expected).</p></li></ul><h3 data-start="2999" data-end="3037">Grade 9/10 — Comments &amp; Batch Mode</h3><ul data-start="3038" data-end="3297"><li data-start="3038" data-end="3111"><p data-start="3040" data-end="3111"><strong data-start="3040" data-end="3061">Ignore full lines</strong>&nbsp;that&nbsp;<strong data-start="3067" data-end="3085">start with&nbsp;<code data-start="3080" data-end="3083">#</code></strong>&nbsp;(Pythonic line comments).</p></li><li data-start="3112" data-end="3168"><p data-start="3114" data-end="3168">Support&nbsp;<code data-start="3122" data-end="3132">-d/--dir</code>&nbsp;to process all&nbsp;<code data-start="3148" data-end="3155">*.txt</code>&nbsp;in a folder.</p></li><li data-start="3169" data-end="3228"><p data-start="3171" data-end="3228">Support&nbsp;<code data-start="3179" data-end="3196">-o/--output-dir</code>&nbsp;to choose/create output folder.</p></li><li data-start="3229" data-end="3297"><p data-start="3231" data-end="3297">Default folder behavior when&nbsp;<code data-start="3260" data-end="3264">-o</code>&nbsp;not provided as specified above.</p></li></ul><h3 data-start="3299" data-end="3358">Grade 10/10 — Exponentiation &amp; No Input Size Guarantees</h3><ul data-start="3359" data-end="3745"><li data-start="3359" data-end="3591"><p data-start="3361" data-end="3392">Add Python power operator:&nbsp;<code data-start="3388" data-end="3392">**</code></p><ul data-start="3395" data-end="3591"><li data-start="3395" data-end="3457"><p data-start="3397" data-end="3457"><strong data-start="3397" data-end="3418">Right-associative</strong>&nbsp;(e.g.,&nbsp;<code data-start="3426" data-end="3455">2**3**2 == 2**(3**2) == 512</code>).</p></li><li data-start="3460" data-end="3509"><p data-start="3462" data-end="3509"><strong data-start="3462" data-end="3483">Higher precedence</strong>&nbsp;than&nbsp;<code data-start="3489" data-end="3492">*</code>&nbsp;<code data-start="3493" data-end="3496">/</code>&nbsp;and&nbsp;<code data-start="3501" data-end="3504">+</code>&nbsp;<code data-start="3505" data-end="3508">-</code>.</p></li><li data-start="3512" data-end="3591"><p data-start="3514" data-end="3591">Precedence is just below unary operators (if you implement unary; see below).</p></li></ul></li><li data-start="3592" data-end="3694"><p data-start="3594" data-end="3694">No specific length limits beyond “fits in Codespaces VM” (i.e., handle very long files efficiently).</p></li><li data-start="3695" data-end="3745"><p data-start="3697" data-end="3745">Maintain all prior features and error reporting.</p></li></ul><hr data-start="3747" data-end="3750"><h2 data-start="3752" data-end="3796">Language Semantics (Recommended Defaults)</h2><h3 data-start="3798" data-end="3808">Tokens</h3><ul data-start="3809" data-end="4170"><li data-start="3809" data-end="3899"><p data-start="3811" data-end="3899">Integers:&nbsp;<code data-start="3821" data-end="3824">0</code>&nbsp;or&nbsp;<code data-start="3828" data-end="3841">[1-9][0-9]*</code>&nbsp;(optionally with leading&nbsp;<code data-start="3867" data-end="3870">+</code>/<code data-start="3871" data-end="3874">-</code>&nbsp;if you implement unary).</p></li><li data-start="3900" data-end="3993"><p data-start="3902" data-end="3993">Floats (if implemented): forms accepted by&nbsp;<code data-start="3945" data-end="3953">strtod</code>&nbsp;are okay (e.g.,&nbsp;<code data-start="3970" data-end="3977">12.34</code>,&nbsp;<code data-start="3979" data-end="3983">.5</code>,&nbsp;<code data-start="3985" data-end="3991">1e-3</code>).</p></li><li data-start="3994" data-end="4023"><p data-start="3996" data-end="4023">Operators:&nbsp;<code data-start="4007" data-end="4023">+ - * / **</code></p></li><li data-start="4024" data-end="4046"><p data-start="4026" data-end="4046">Parentheses:&nbsp;<code data-start="4039" data-end="4042">(</code>&nbsp;<code data-start="4043" data-end="4046">)</code></p></li><li data-start="4047" data-end="4073"><p data-start="4049" data-end="4073">Whitespace: skip freely.</p></li><li data-start="4074" data-end="4170"><p data-start="4076" data-end="4170">Comments:&nbsp;<strong data-start="4086" data-end="4101">entire line</strong>&nbsp;starting with&nbsp;<code data-start="4116" data-end="4119">#</code>&nbsp;is ignored (from first non-space&nbsp;<code data-start="4153" data-end="4156">#</code>&nbsp;to line end).</p></li></ul><h3 data-start="4172" data-end="4202">Precedence &amp; Associativity</h3><p data-start="4203" data-end="4226">From highest to lowest:</p><ol data-start="4227" data-end="4383"><li data-start="4227" data-end="4254"><p data-start="4230" data-end="4254"><code data-start="4230" data-end="4234">**</code>&nbsp;(right-associative)</p></li><li data-start="4255" data-end="4323"><p data-start="4258" data-end="4323">Unary&nbsp;<code data-start="4264" data-end="4267">+</code>&nbsp;<code data-start="4268" data-end="4271">-</code>&nbsp;(optional, left-to-right apply to a single primary)</p></li><li data-start="4324" data-end="4353"><p data-start="4327" data-end="4353"><code data-start="4327" data-end="4330">*</code>&nbsp;<code data-start="4331" data-end="4334">/</code>&nbsp;(left-associative)</p></li><li data-start="4354" data-end="4383"><p data-start="4357" data-end="4383"><code data-start="4357" data-end="4360">+</code>&nbsp;<code data-start="4361" data-end="4364">-</code>&nbsp;(left-associative)</p></li></ol><blockquote data-start="4385" data-end="4527"><p data-start="4387" data-end="4527"><strong data-start="4387" data-end="4396">Note:</strong>&nbsp;You can reach 10/10 without unary&nbsp;<code data-start="4431" data-end="4434">+</code>/<code data-start="4435" data-end="4438">-</code>. If you&nbsp;<strong data-start="4447" data-end="4453">do</strong>&nbsp;implement unary, document it and ensure it doesn’t break error positions.</p></blockquote><h3 data-start="4529" data-end="4566">Numeric Types &amp; Output Formatting</h3><ul data-start="4567" data-end="5032"><li data-start="4567" data-end="4695"><p data-start="4569" data-end="4695"><strong data-start="4569" data-end="4581">Integers</strong>: use 64-bit (<code data-start="4595" data-end="4606">long long</code>) for safety. Overflow handling is&nbsp;<strong data-start="4641" data-end="4657">not required but certainly a bonus</strong>&nbsp;(document behavior if you detect it).</p></li><li data-start="4696" data-end="4734"><p data-start="4698" data-end="4734"><strong data-start="4698" data-end="4708">Floats</strong>: use&nbsp;<code data-start="4714" data-end="4722">double</code>&nbsp;(<code data-start="4724" data-end="4732">strtod</code>).</p></li><li data-start="4735" data-end="5032"><p data-start="4737" data-end="4757"><strong data-start="4737" data-end="4756">Result printing</strong>:</p><ul data-start="4760" data-end="5032"><li data-start="4760" data-end="4822"><p data-start="4762" data-end="4822">If your evaluator is&nbsp;<strong data-start="4783" data-end="4795">int-only</strong>: print integer like&nbsp;<code data-start="4816" data-end="4821">-42</code>.</p></li><li data-start="4825" data-end="4974"><p data-start="4827" data-end="4848">If&nbsp;<strong data-start="4830" data-end="4847">mixed numeric</strong>:</p><ul data-start="4853" data-end="4974"><li data-start="4853" data-end="4943"><p data-start="4855" data-end="4943">If the final value is&nbsp;<strong data-start="4877" data-end="4889">integral</strong>&nbsp;(e.g.,&nbsp;<code data-start="4897" data-end="4902">3.0</code>), print&nbsp;<strong data-start="4911" data-end="4930">without decimal</strong>&nbsp;(e.g.,&nbsp;<code data-start="4938" data-end="4941">3</code>).</p></li><li data-start="4948" data-end="4974"><p data-start="4950" data-end="4974">Else print with&nbsp;<code data-start="4966" data-end="4973">%.15g</code>.</p></li></ul></li><li data-start="4977" data-end="5032"><p data-start="4979" data-end="5032">Trailing spaces/newlines: one newline at end is fine.</p></li></ul></li></ul><hr data-start="5034" data-end="5037"><h2 data-start="5039" data-end="5071">Errors &amp; Positions (Required)</h2><p data-start="5072" data-end="5123">On the&nbsp;<strong data-start="5079" data-end="5088">first</strong>&nbsp;encountered error, stop and write:</p><pre data-start="5124" data-end="5143"><div><div><div><div></div></div></div><div dir="ltr"><code>ERROR:&lt;pos&gt;
</code></div></div></pre><ul data-start="5144" data-end="5474"><li data-start="5144" data-end="5221"><p data-start="5146" data-end="5221"><code data-start="5146" data-end="5153">&lt;pos&gt;</code>&nbsp;is&nbsp;<strong data-start="5157" data-end="5179">1-based char index</strong>&nbsp;in the&nbsp;<strong data-start="5187" data-end="5202">entire file</strong>&nbsp;(count&nbsp;<code data-start="5210" data-end="5214">\n</code>&nbsp;as 1).</p></li><li data-start="5222" data-end="5474"><p data-start="5224" data-end="5233">Examples:</p><ul data-start="5236" data-end="5474"><li data-start="5236" data-end="5273"><p data-start="5238" data-end="5273"><code data-start="5238" data-end="5248">12 + * 5</code>&nbsp;→ error at&nbsp;<code data-start="5260" data-end="5263">*</code>&nbsp;position.</p></li><li data-start="5276" data-end="5375"><p data-start="5278" data-end="5375"><code data-start="5278" data-end="5286">((2+3)</code>&nbsp;→ error at the place the parser expected&nbsp;<code data-start="5328" data-end="5331">)</code>&nbsp;(you may choose to report at EOF position).</p></li><li data-start="5378" data-end="5474"><p data-start="5380" data-end="5474"><code data-start="5380" data-end="5386">10/0</code>&nbsp;→ division by zero; report at the start of&nbsp;<code data-start="5430" data-end="5433">0</code>&nbsp;(or the&nbsp;<code data-start="5442" data-end="5445">/</code>)—be consistent and document.</p></li></ul></li></ul><blockquote data-start="5476" data-end="5625"><p data-start="5478" data-end="5625"><strong data-start="5478" data-end="5528">Optional enhancement (not required for grade):</strong>&nbsp;You may also write&nbsp;<code data-start="5548" data-end="5568">ERROR:&lt;line&gt;:&lt;col&gt;</code>&nbsp;<strong data-start="5569" data-end="5584">in addition</strong>&nbsp;to the required format on the next line.</p></blockquote><hr data-start="5627" data-end="5630"><h2 data-start="5632" data-end="5664">Grammar (suggested, EBNF-ish, but you can use something else)</h2><p data-start="5665" data-end="5730">You can implement via&nbsp;<strong data-start="5687" data-end="5708">recursive descent</strong>&nbsp;or&nbsp;<strong data-start="5712" data-end="5729">shunting-yard</strong>.</p><p data-start="5732" data-end="5748">If&nbsp;<strong data-start="5735" data-end="5747">no unary</strong>:</p><pre data-start="5749" data-end="5943"><div><div><div><div></div></div></div><div dir="ltr"><code>expr    := term { ('+' | '-') term }
term    := power { ('*' | '/') power }
power   := primary { '**' primary }         // implement as right-associative
primary := NUMBER | '(' expr ')'
</code></div></div></pre><p data-start="5945" data-end="5963">If&nbsp;<strong data-start="5948" data-end="5962">with unary</strong>:</p><pre data-start="5964" data-end="6235"><div><div><div><div></div></div></div><div dir="ltr"><code>expr    := term { ('+' | '-') term }
term    := factor { ('*' | '/') factor }
factor  := power
power   := unary { '**' unary }             // right-assoc: parse power -&gt; unary ( '**' power )?
unary   := ('+' | '-') unary | primary
primary := NUMBER | '(' expr ')'
</code></div></div></pre><hr data-start="6237" data-end="6240"><h2 data-start="6242" data-end="6253">Examples</h2><h3 data-start="6255" data-end="6265">Simple</h3><p data-start="6266" data-end="6286">Input (<code data-start="6273" data-end="6284">task1.txt</code>):</p><pre data-start="6287" data-end="6300"><div><div><div><div></div></div></div><div dir="ltr"><code>2 + 2
</code></div></div></pre><p data-start="6301" data-end="6313">Output file:</p><pre data-start="6314" data-end="6355"><div><div><div><div></div></div></div><div dir="ltr"><code>task1_name_lastname_studentid.txt
</code></div></div></pre><p data-start="6356" data-end="6365">Contents:</p><pre data-start="6366" data-end="6375"><div><div><div><div></div></div></div><div dir="ltr"><code>4
</code></div></div></pre><h3 data-start="6377" data-end="6400">Error with position</h3><pre data-start="6401" data-end="6416"><div><div><div><div></div></div></div><div dir="ltr"><code>7 + * 3
</code></div></div></pre><p data-start="6417" data-end="6475"><code data-start="6417" data-end="6420">*</code>&nbsp;is the 5th character (assuming single spaces). Output:</p><pre data-start="6476" data-end="6491"><div><div><div><div></div></div></div><div dir="ltr"><code>ERROR:5
</code></div></div></pre><h3 data-start="6493" data-end="6521">Parentheses &amp; precedence</h3><pre data-start="6522" data-end="6549"><div><div><div><div></div></div></div><div dir="ltr"><code>2 + 3*4
(2 + 3) * 4
</code></div></div></pre><p data-start="6550" data-end="6565">→&nbsp;<code data-start="6552" data-end="6556">14</code>&nbsp;and&nbsp;<code data-start="6561" data-end="6565">20</code></p><h3 data-start="6567" data-end="6587">Power (Grade 10)</h3><pre data-start="6588" data-end="6603"><div><div><div><div></div></div></div><div dir="ltr"><code>2**3**2
</code></div></div></pre><p data-start="6604" data-end="6611">→&nbsp;<code data-start="6606" data-end="6611">512</code></p><h3 data-start="6613" data-end="6649">Comments &amp; multi-file (Grade 9+)</h3><pre data-start="6650" data-end="6681"><div><div><div><div></div></div></div><div dir="ltr"><code># this is ignored
2 + 3
</code></div></div></pre><p data-start="6682" data-end="6687">→&nbsp;<code data-start="6684" data-end="6687">5</code></p><hr data-start="6689" data-end="6692"><h2 data-start="6694" data-end="6747">Implementation Hints (C, GCC on Ubuntu/Codespaces)</h2><ul data-start="6749" data-end="8020"><li data-start="6749" data-end="6929"><p data-start="6751" data-end="6929"><strong data-start="6751" data-end="6764">Tokenizer</strong>: produce a stream of tokens (NUMBER, PLUS, MINUS, STAR, SLASH, POW, LPAREN, RPAREN, EOL/EOF) with each token carrying&nbsp;<strong data-start="6883" data-end="6898">start index</strong>&nbsp;(1-based) for error reporting.</p></li><li data-start="6930" data-end="7046"><p data-start="6932" data-end="7046"><strong data-start="6932" data-end="6943">Numbers</strong>: parse with&nbsp;<code data-start="6956" data-end="6965">strtoll</code>&nbsp;(int) and/or&nbsp;<code data-start="6979" data-end="6987">strtod</code>&nbsp;(double). Keep&nbsp;<strong data-start="7003" data-end="7026">original char index</strong>&nbsp;for error pointing.</p></li><li data-start="7047" data-end="7210"><p data-start="7049" data-end="7061"><strong data-start="7049" data-end="7060">Parsing</strong>:</p><ul data-start="7064" data-end="7210"><li data-start="7064" data-end="7134"><p data-start="7066" data-end="7134"><strong data-start="7066" data-end="7087">Recursive descent</strong>&nbsp;is straightforward and keeps precedence clear.</p></li><li data-start="7137" data-end="7210"><p data-start="7139" data-end="7210">For&nbsp;<code data-start="7143" data-end="7147">**</code>&nbsp;right-associativity, implement&nbsp;<code data-start="7179" data-end="7209">power := unary ('**' power)?</code>.</p></li></ul></li><li data-start="7211" data-end="7355"><p data-start="7213" data-end="7355"><strong data-start="7213" data-end="7226">Big input</strong>&nbsp;(Grade 10): stream the file into memory (e.g.,&nbsp;<code data-start="7274" data-end="7280">mmap</code>&nbsp;or&nbsp;<code data-start="7284" data-end="7291">fread</code>), but avoid quadratic concatenation. Tokenize once, then parse.</p></li><li data-start="7356" data-end="7515"><p data-start="7358" data-end="7377"><strong data-start="7358" data-end="7376">Error handling</strong>:</p><ul data-start="7380" data-end="7515"><li data-start="7380" data-end="7469"><p data-start="7382" data-end="7469">Define a single function&nbsp;<code data-start="7407" data-end="7427">fail(pos, message)</code>&nbsp;that stores the&nbsp;<strong data-start="7444" data-end="7453">first</strong>&nbsp;error position.</p></li><li data-start="7472" data-end="7515"><p data-start="7474" data-end="7515">Return early to short-circuit evaluation.</p></li></ul></li><li data-start="7516" data-end="7681"><p data-start="7518" data-end="7539"><strong data-start="7518" data-end="7538">Division by zero</strong>:</p><ul data-start="7542" data-end="7681"><li data-start="7542" data-end="7584"><p data-start="7544" data-end="7584">For ints:&nbsp;<code data-start="7554" data-end="7562">b == 0</code>&nbsp;→ error at token&nbsp;<code data-start="7580" data-end="7583">b</code>.</p></li><li data-start="7587" data-end="7681"><p data-start="7589" data-end="7681">For floats: if divisor&nbsp;<strong data-start="7612" data-end="7638">numerically equals 0.0</strong>, treat as error (do&nbsp;<strong data-start="7659" data-end="7666">not</strong>&nbsp;return&nbsp;<code data-start="7674" data-end="7679">inf</code>).</p></li></ul></li><li data-start="7682" data-end="7805"><p data-start="7684" data-end="7705"><strong data-start="7684" data-end="7704">Output directory</strong>:</p><ul data-start="7708" data-end="7805"><li data-start="7708" data-end="7765"><p data-start="7710" data-end="7765">Use&nbsp;<code data-start="7714" data-end="7721">mkdir</code>&nbsp;(POSIX) with&nbsp;<code data-start="7735" data-end="7741">0775</code>. If it exists, proceed.</p></li><li data-start="7768" data-end="7805"><p data-start="7770" data-end="7805">Build paths with&nbsp;<code data-start="7787" data-end="7797">snprintf</code>&nbsp;safely.</p></li></ul></li><li data-start="7806" data-end="7903"><p data-start="7808" data-end="7903"><strong data-start="7808" data-end="7820">Globbing</strong>&nbsp;(<code data-start="7822" data-end="7826">-d</code>): read directory entries, include files ending with&nbsp;<code data-start="7879" data-end="7885">.txt</code>&nbsp;(case-sensitive).</p></li><li data-start="7904" data-end="7963"><p data-start="7906" data-end="7963"><strong data-start="7906" data-end="7918">Comments</strong>: skip a line if first non-space char is&nbsp;<code data-start="7959" data-end="7962">#</code>.</p></li><li data-start="7964" data-end="8020"><p data-start="7966" data-end="8020"><strong data-start="7966" data-end="7978">Makefile</strong>: provide&nbsp;<code data-start="7988" data-end="7994">make</code>,&nbsp;<code data-start="7996" data-end="8007">make test</code>,&nbsp;<code data-start="8009" data-end="8019">make run</code>.</p></li></ul><hr data-start="8022" data-end="8025"><h2 data-start="8027" data-end="8048"></h2><article tabindex="-1" dir="auto" data-turn-id="0e2baa30-f9a0-4417-b85a-11134b90804a" data-testid="conversation-turn-4" data-scroll-anchor="false" data-turn="assistant"><div><div tabindex="-1"><div><div data-message-author-role="assistant" data-message-id="da3db25d-fa01-4615-8229-b9d2c2178d03" dir="auto" data-message-model-slug="gpt-5"><div><div><h2 data-start="141" data-end="184">📤 Project Submission Instructions</h2>
<p data-start="186" data-end="225">You must submit <strong data-start="202" data-end="222">exactly one file</strong>:</p>
<pre data-start="227" data-end="241"><div><div><div><div></div></div></div><div dir="ltr"><code>calc.c
</code></div></div></pre>
<h3 data-start="243" data-end="287">File Header (Mandatory &amp; Optional Lines)</h3>
<p data-start="289" data-end="350">The <strong data-start="293" data-end="349">first lines of your <code data-start="315" data-end="323">calc.c</code> must follow this format</strong>:</p>
<pre data-start="352" data-end="526"><div><div><div><div></div></div></div><div dir="ltr"><code>// Name Lastname StudentID
// (optional) GitHub repository link for this assignment
// Compilation instructions (e.g., gcc -O2 -Wall -Wextra -std=c17 -o calc calc.c)
</code></div></div></pre>
<ul data-start="528" data-end="848">
<li data-start="528" data-end="583">
<p data-start="530" data-end="583"><strong data-start="530" data-end="540">Line 1</strong>: your full <strong data-start="552" data-end="581">Name, Lastname, StudentID</strong></p>
</li>
<li data-start="584" data-end="728">
<p data-start="586" data-end="653"><strong data-start="586" data-end="596">Line 2</strong> (optional): link to your GitHub repo for this project.</p>
<ul data-start="656" data-end="728">
<li data-start="656" data-end="728">
<p data-start="658" data-end="728">If provided and the repo is well-structured, it may improve grading.</p>
</li>
</ul>
</li>
<li data-start="729" data-end="848">
<p data-start="731" data-end="848"><strong data-start="731" data-end="745">Next lines</strong>: any <strong data-start="751" data-end="794">special compilation or run instructions</strong> if your program needs them (beyond standard <code data-start="839" data-end="844">gcc</code>).</p>
</li>
</ul>
<hr data-start="850" data-end="853">
<h3 data-start="855" data-end="887">Code Commenting Requirements</h3>
<ul data-start="889" data-end="1583">
<li data-start="889" data-end="966">
<p data-start="891" data-end="966">Your <code data-start="896" data-end="904">calc.c</code> must contain <strong data-start="918" data-end="963">plentiful, clear, and meaningful comments</strong>.</p>
</li>
<li data-start="967" data-end="1244">
<p data-start="969" data-end="1054">Focus on explaining <strong data-start="989" data-end="1020">WHY you are doing something</strong>, not just <em data-start="1031" data-end="1037">what</em> the code does.</p>
<ul data-start="1057" data-end="1244">
<li data-start="1057" data-end="1187">
<p data-start="1059" data-end="1076">✅ Good example:</p>
<pre data-start="1081" data-end="1187"><div><div><div><div></div></div></div><div dir="ltr"><code>// Using recursive descent parsing here because it naturally reflects operator precedence
</code></div></div></pre>
</li>
<li data-start="1190" data-end="1244">
<p data-start="1192" data-end="1208">❌ Bad example:</p>
<pre data-start="1213" data-end="1244"><div><div><div><div></div></div></div><div dir="ltr"><code>// Add x and y
</code></div></div></pre>
</li>
</ul>
</li>
<li data-start="1245" data-end="1583">
<p data-start="1247" data-end="1347">If you use <strong data-start="1258" data-end="1280">external resources</strong> (books, StackOverflow answers, documentation, AI prompts, etc.),</p>
<ul data-start="1350" data-end="1583">
<li data-start="1350" data-end="1414">
<p data-start="1352" data-end="1414"><strong data-start="1352" data-end="1377">cite them in comments</strong> at the relevant place in the code.</p>
</li>
<li data-start="1417" data-end="1583">
<p data-start="1419" data-end="1429">Example:</p>
<pre data-start="1434" data-end="1583"><div><div><div><div></div></div></div><div dir="ltr"><code>// Tokenizer logic inspired by K&amp;R Chapter 5 example
// Prompt used with ChatGPT: "recursive descent parser in C for arithmetic"
</code></div></div></pre>
</li>
</ul>
</li>
</ul>
<hr data-start="1585" data-end="1588">
<h3 data-start="1590" data-end="1607">Grading Notes</h3>
<ul data-start="1609" data-end="1853">
<li data-start="1609" data-end="1681">
<p data-start="1611" data-end="1681"><strong data-start="1611" data-end="1679">Unclear, missing, or low-quality comments will lower your grade.</strong></p>
</li>
<li data-start="1682" data-end="1744">
<p data-start="1684" data-end="1744"><strong data-start="1684" data-end="1714">Bad or misleading comments</strong> are worse than no comments.</p>
</li>
<li data-start="1745" data-end="1853">
<p data-start="1747" data-end="1853"><strong data-start="1747" data-end="1778">Explicitly citing resources</strong> you used is required. Failure to do so will negatively impact the grade.</p>
</li>
</ul>
<hr data-start="1855" data-end="1858">
<p data-start="1860" data-end="1965">👉 Only <code data-start="1868" data-end="1876">calc.c</code> will be accepted. Do <strong data-start="1898" data-end="1905">not</strong> upload Makefiles, executables, or multiple <code data-start="1949" data-end="1956">.c/.h</code> files.</p>
<hr data-start="1967" data-end="1970">
<p data-start="1972" data-end="2091" data-is-last-node="" data-is-only-node=""></p></div></div></div></div></div></div></article><article tabindex="-1" dir="auto" data-turn-id="request-WEB:f0bbdf5a-e43d-42ec-ae2a-f2b9b1db05a0-10" data-testid="conversation-turn-6" data-scroll-anchor="true" data-turn="assistant"><div><div tabindex="-1"><div><div data-message-author-role="assistant" data-message-id="58dcf3af-df23-494d-b23a-1f32ef1cac35" dir="auto" data-message-model-slug="gpt-5"><div><div>
<h2 data-start="134" data-end="169">📑 Sample <code data-start="147" data-end="155">calc.c</code> File Header</h2>
<pre data-start="171" data-end="332"><div><div><div><div></div></div></div><div dir="ltr"><code>// Alice Johnson 221234
// <a href="https://github.com/alicejohnson/c-final-project" class="_blanktarget">https://github.com/alicejohnson/c-final-project</a>   &lt;-- optional
// Compile with: gcc -O2 -Wall -Wextra -std=c17 -o calc calc.c</code></div></div></pre></div></div></div></div></div></div></article><ul data-start="8050" data-end="8565"><li data-start="8488" data-end="8565"><p data-start="8490" data-end="8565"></p></li></ul><hr data-start="8567" data-end="8570"><h2 data-start="8572" data-end="8592">Grading Checklist</h2><div><div tabindex="-1"><table data-start="8594" data-end="9244"><thead data-start="8594" data-end="8619"><tr data-start="8594" data-end="8619"><th data-start="8594" data-end="8601" data-col-size="md">Item</th><th data-start="8601" data-end="8610" data-col-size="sm">Points</th><th data-start="8610" data-end="8619" data-col-size="md">Notes</th></tr></thead><tbody data-start="8635" data-end="9244"><tr data-start="8635" data-end="8715"><td data-start="8635" data-end="8684" data-col-size="md">Grade 4 baseline (int&nbsp;<code data-start="8659" data-end="8664">+ -</code>, single line ≤100)</td><td data-start="8684" data-end="8688" data-col-size="sm">4</td><td data-start="8688" data-end="8715" data-col-size="md">result or&nbsp;<code data-start="8700" data-end="8713">ERROR:&lt;pos&gt;</code></td></tr><tr data-start="8716" data-end="8774"><td data-start="8716" data-end="8749" data-col-size="md">Correct&nbsp;<code data-start="8726" data-end="8739">ERROR:&lt;pos&gt;</code>&nbsp;location</td><td data-start="8749" data-end="8754" data-col-size="sm">+1</td><td data-start="8754" data-end="8774" data-col-size="md">First error only</td></tr><tr data-start="8775" data-end="8834"><td data-start="8775" data-end="8791" data-col-size="md">Add&nbsp;<code data-start="8781" data-end="8784">*</code>&nbsp;(int)</td><td data-start="8791" data-end="8796" data-col-size="sm">+1</td><td data-start="8796" data-end="8834" data-col-size="md">Optional float support (challenge)</td></tr><tr data-start="8835" data-end="8920"><td data-start="8835" data-end="8884" data-col-size="md">Add&nbsp;<code data-start="8841" data-end="8844">/</code>&nbsp;(int or float) + div-by-zero detection</td><td data-start="8884" data-end="8889" data-col-size="sm">+1</td><td data-start="8889" data-end="8920" data-col-size="md">Report at sensible position</td></tr><tr data-start="8921" data-end="8991"><td data-start="8921" data-end="8962" data-col-size="md">Handle multi-line &amp; up to 10,000 chars</td><td data-start="8962" data-end="8967" data-col-size="sm">+1</td><td data-start="8967" data-end="8991" data-col-size="md">Additional challenge</td></tr><tr data-start="8992" data-end="9058"><td data-start="8992" data-end="9029" data-col-size="md">Parentheses with proper precedence</td><td data-start="9029" data-end="9034" data-col-size="sm">+1</td><td data-start="9034" data-end="9058" data-col-size="md">Keep error reporting</td></tr><tr data-start="9059" data-end="9172"><td data-start="9059" data-end="9116" data-col-size="md"><code data-start="9061" data-end="9064">#</code>&nbsp;comment lines;&nbsp;<code data-start="9080" data-end="9090">-d/--dir</code>&nbsp;batch;&nbsp;<code data-start="9098" data-end="9115">-o/--output-dir</code></td><td data-start="9116" data-end="9121" data-col-size="sm">+1</td><td data-start="9121" data-end="9172" data-col-size="md">Create folder if missing; default folder naming</td></tr><tr data-start="9173" data-end="9244"><td data-start="9173" data-end="9222" data-col-size="md"><code data-start="9175" data-end="9179">**</code>&nbsp;(right-assoc) + robust long-file handling</td><td data-start="9222" data-end="9227" data-col-size="sm">+2</td><td data-start="9227" data-end="9244" data-col-size="md">Full score 10</td></tr></tbody></table></div></div><p data-start="9246" data-end="9284"><strong data-start="9246" data-end="9272">Code quality modifiers</strong>&nbsp;(up to ±1):</p><ul data-start="9285" data-end="9442"><li data-start="9285" data-end="9351"><p data-start="9287" data-end="9351">+0.5: clear structure, no UB, checks for I/O errors, robust CLI.</p></li><li data-start="9352" data-end="9392"><p data-start="9354" data-end="9392">+0.5: concise tests and documentation.</p></li><li data-start="9393" data-end="9442"><p data-start="9395" data-end="9442">−1.0: memory leaks/UB/crashes on normal inputs.</p></li><li data-start="9393" data-end="9442"><p data-start="9395" data-end="9442">+-2.0: I reserve right to adjust grade UP or DOWN, based on code clarity, comments</p></li></ul><hr data-start="9444" data-end="9447"><h2 data-start="9449" data-end="9477">Anti-cheating &amp; Libraries</h2><ul data-start="9478" data-end="9699"><li data-start="9478" data-end="9523"><p data-start="9480" data-end="9523"><strong data-start="9480" data-end="9490">Do not</strong>&nbsp;shell out to Python/BC/expr/etc.</p></li><li data-start="9524" data-end="9613"><p data-start="9526" data-end="9613">Only use&nbsp;<strong data-start="9535" data-end="9557">standard C library</strong>&nbsp;(stdio/stdlib/string/ctype/math/errno/dirent/sys/stat).</p></li><li data-start="9614" data-end="9699"><p data-start="9616" data-end="9699">No parser generators for the core (flex/bison) — write your own tokenizer &amp; parser.</p></li><li data-start="9614" data-end="9699"><p data-start="9616" data-end="9699">If you use code assistance such as LLMs (all prompts are required in comments as well as specific tool!)</p></li><li data-start="9614" data-end="9699"><p data-start="9616" data-end="9699">Relying fully on LLM or others is against spirit of this assignment and will hurt you&nbsp;</p></li></ul><hr data-start="9701" data-end="9704"><h2 data-start="9706" data-end="9727">Starter Test Ideas</h2><p data-start="9729" data-end="9738"><strong data-start="9729" data-end="9738">Valid</strong></p><ul data-start="9739" data-end="9885"><li data-start="9739" data-end="9745"><p data-start="9741" data-end="9745"><code data-start="9741" data-end="9745">42</code></p></li><li data-start="9746" data-end="9761"><p data-start="9748" data-end="9761"><code data-start="9748" data-end="9761">10 + 20 - 5</code></p></li><li data-start="9762" data-end="9775"><p data-start="9764" data-end="9775"><code data-start="9764" data-end="9775">2 * 3 + 4</code></p></li><li data-start="9776" data-end="9789"><p data-start="9778" data-end="9789"><code data-start="9778" data-end="9789">2 + 3 * 4</code></p></li><li data-start="9790" data-end="9805"><p data-start="9792" data-end="9805"><code data-start="9792" data-end="9805">(2 + 3) * 4</code></p></li><li data-start="9806" data-end="9817"><p data-start="9808" data-end="9817"><code data-start="9808" data-end="9817">2**3**2</code></p></li><li data-start="9818" data-end="9885"><p data-start="9820" data-end="9885">With floats (if supported):&nbsp;<code data-start="9848" data-end="9853">3/2</code>,&nbsp;<code data-start="9855" data-end="9862">1.5*4</code>,&nbsp;<code data-start="9864" data-end="9874">.5 + .25</code>,&nbsp;<code data-start="9876" data-end="9885">1e3 + 2</code></p></li></ul><p data-start="9887" data-end="9898"><strong data-start="9887" data-end="9898">Invalid</strong></p><ul data-start="9899" data-end="9985"><li data-start="9899" data-end="9917"><p data-start="9901" data-end="9917"><code data-start="9901" data-end="9904">+</code>&nbsp;(no operand)</p></li><li data-start="9918" data-end="9940"><p data-start="9920" data-end="9940"><code data-start="9920" data-end="9926">2 **</code>&nbsp;(trailing op)</p></li><li data-start="9941" data-end="9951"><p data-start="9943" data-end="9951"><code data-start="9943" data-end="9951">2 /* 3</code></p></li><li data-start="9952" data-end="9962"><p data-start="9954" data-end="9962"><code data-start="9954" data-end="9962">((1+2)</code></p></li><li data-start="9963" data-end="9971"><p data-start="9965" data-end="9971"><code data-start="9965" data-end="9971">10/0</code></p></li><li data-start="9972" data-end="9985"><p data-start="9974" data-end="9985"><code data-start="9974" data-end="9985">2 ** ** 3</code></p></li></ul><hr data-start="9987" data-end="9990"><h2 data-start="9992" data-end="10018">Timeline &amp; Deliverables</h2><ul data-start="10019" data-end="10260"><li data-start="10019" data-end="10087"><p data-start="10021" data-end="10087"><b>Submit on Time</b></p></li><li data-start="10019" data-end="10087"><p data-start="10021" data-end="10087"><b>-1 grade for being up to 1 week late</b></p></li><li data-start="10019" data-end="10087"><p data-start="10021" data-end="10087"><b>-2 grade for being up to 2 weeks late</b></p></li><li data-start="10088" data-end="10260"><ul data-start="10168" data-end="10260"><li data-start="10234" data-end="10260"></li></ul></li></ul><hr data-start="10262" data-end="10265"><h2 data-start="10267" data-end="10274">Tips</h2><ul data-start="10275" data-end="10589"><li data-start="10275" data-end="10352"><p data-start="10277" data-end="10352">Keep a&nbsp;<strong data-start="10284" data-end="10305">global char index</strong>&nbsp;during scanning to make&nbsp;<code data-start="10330" data-end="10343">ERROR:&lt;pos&gt;</code>&nbsp;trivial.</p></li><li data-start="10353" data-end="10440"><p data-start="10355" data-end="10440">Store each token’s&nbsp;<strong data-start="10374" data-end="10389">start index</strong>; on errors report the most relevant token’s start.</p></li><li data-start="10441" data-end="10523"><p data-start="10443" data-end="10523">To print integers from double results, check&nbsp;<code data-start="10488" data-end="10522">fabs(val - llround(val)) &lt; 1e-12</code>.</p></li><li data-start="10524" data-end="10589"><p data-start="10526" data-end="10589">For&nbsp;<code data-start="10530" data-end="10534">**</code>, beware left-to-right bugs; test&nbsp;<code data-start="10568" data-end="10577">2**3**2</code>&nbsp;rigorously.</p></li></ul><br><br><p></p></div>
